<!DOCTYPE html>
<html>

  <head>
    <title>Torn Tracks Chronologically</title>
    <%= stylesheet_link_tag('application', :media => 'all') %>
    <%= javascript_include_tag('application') %>

    <!--Maybe move down...-->
    <script> document.addEventListener('play', function(e){
        var audios = document.getElementsByTagName('audio');
        for(var i = 0, len = audios.length; i < len;i++){
            if(audios[i] != e.target){
                audios[i].pause();
              }}},
        true);
    </script>
  </head>

  <body>
    <div id="wrapper">
      <div id="mainchronology">
          <button class="button"><%= link_to_unless_current("<<", root_path) %></button>
          <button id="button">i</button>

        <div id="myModal" class="modal">
          <div class="modal-content">
            <span class="close">&times;</span>
            <p>Torn Tracks organised chronologically.</p>
          </div>
        </div>

        <div id="contentchronology">
          <%= yield %>
        </div>

        <div class="clear"></div>
      </div>

      <div id="footer">
        <p id="copyright">&copy; jiskahuizing.com</p>
      </div>
    </div>
  </body>

  <script>
  // Get the modal
  var modal = document.getElementById('myModal');
  // Get the button that opens the modal
  var btn = document.getElementById("button");
  // Get the <span> element that closes the modal
  var span = document.getElementsByClassName("close")[0];
  // When the user clicks on the button, open the modal
  btn.onclick = function() {modal.style.display = "block";}
  // When the user clicks on <span> (x), close the modal
  span.onclick = function() { modal.style.display = "none"; }
  // When the user clicks anywhere outside of the modal, close it
  window.onclick = function(event) {
    if (event.target == modal) {
        modal.style.display = "none";
      }
    }
  </script>

  <script>
    (function() {
      var rotate, timeline;
      rotate = function() {
        return $('.card:first-child').fadeOut(400, 'swing', function() {
          return $('.card:first-child').appendTo('.container').hide();
        }).fadeIn(400, 'swing');
      };
      timeline = setInterval(rotate, 1200);
      $('body').hover(function() {
        return clearInterval(timeline);
      });
      $('.card').click(function() {
        return rotate();
      });
    }).call(this);
  </script>

  <script type="text/javascript">
    $(window).resize(function() {
        if((window.fullScreen) || (window.innerWidth == screen.width && window.innerHeight == screen.height)) {
            $("html").css("overflow", "hidden");
        } else {
            $("html").css("overflow", "auto");
        }
    });
    $(document).ready(function(){
        $(window).resize();
    });
  </script>

</html>
